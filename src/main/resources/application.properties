# ============================================
# MONGODB CONFIGURATION
# ============================================
spring.data.mongodb.uri=${MONGODB_URI}

# ============================================
# JPA / HIBERNATE CONFIGURATION - REMOVED
# ============================================
# spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
# spring.jpa.show-sql=${JPA_SHOW_SQL:false}

# ============================================
# SERVER CONFIGURATION
# ============================================
server.port=${SERVER_PORT:8080}

# ============================================
# MICROSOFT ENTRA ID (AZURE AD) CONFIGURATION
# ============================================
spring.security.oauth2.resourceserver.jwt.issuer-uri=${AZURE_ISSUER_URI}
spring.security.oauth2.resourceserver.jwt.audiences=${AZURE_AUDIENCE}
# Prefer explicit JWKS to avoid discovery glitches
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://login.microsoftonline.com/${AZURE_TENANT_ID}/discovery/keys
# Allow small clock skew for local dev
spring.security.oauth2.resourceserver.jwt.decoder.clock-skew=30s

# Azure AD Application
azure.activedirectory.tenant-id=${AZURE_TENANT_ID}
azure.activedirectory.client-id=${AZURE_CLIENT_ID}
azure.activedirectory.client-secret=${AZURE_CLIENT_SECRET}

# ============================================
# CORS CONFIGURATION
# ============================================
cors.allowed.origins=${CORS_ALLOWED_ORIGINS}
cors.allowed.methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
cors.allowed.headers=${CORS_ALLOWED_HEADERS:*}

# ============================================
# MAIL CONFIGURATION
# ============================================
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST}

# ============================================
# AI CHATBOT CONFIGURATION (Google Gemini)
# ============================================
gemini.api.key=${GEMINI_API_KEY}
gemini.api.url=${GEMINI_API_URL:https://generativelanguage.googleapis.com/v1beta/openai}
 
# ============================================
# LOGGING (enable security debug to diagnose 401)
# ============================================
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.springframework.security.oauth2.jwt=TRACE